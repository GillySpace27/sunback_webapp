<!doctype html>
<!-- source ../.env must be run server-side before launch -->
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Solar Archive Image Selection Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Arial, sans-serif; background:#f6f7fb; color:#111; margin:0; }
    .wrap { max-width: 1100px; margin: 2rem auto; padding: 0 1rem; }
    .controls { display:flex; flex-wrap:wrap; gap:.5rem; align-items:center; margin-bottom:1rem; }
    input, select, button { padding:.6rem .8rem; border-radius:8px; border:1px solid #ccc; }
    #generate-btn { background:#090; color:#fff; border:none; cursor:pointer; }
    #hq-btn { background:#33f; color:#fff; border:none; cursor:pointer; }
    #clearCacheBtn { background:#e05d44; color:#fff; border:none; cursor:pointer; }
    #uploadPrintfulBtn {
      background: rgb(97, 0, 166); /* enabled purple */
      color: #fff;
      border: none;
      cursor: pointer;
      transition: background 0.2s ease, opacity 0.2s ease;
    }

    #uploadPrintfulBtn:disabled {
      background: #999;        /* grey when disabled */
      cursor: not-allowed;
      opacity: 0.6;
    }
    #solar-status { margin:.5rem 0 1rem; color:#444; }
    #solar-image { max-width:100%; display:none; background:#000; border-radius:8px; }
    #productPicker { display:flex; flex-wrap:wrap; gap:12px; margin-top: 16px; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items:start; }
    @media (max-width: 900px){ .grid { grid-template-columns: 1fr; } }
    #productPicker {
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
      align-items:flex-start;
      gap:1em;
    }

    .template-thumb {
      width:100%;
      border-radius:8px;
    }

    .template-card:hover {
      transform:scale(1.03);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Solar Archive Image Selection Tool</h1>
    <div class="controls">
      <label>Date: <input type="date" id="solar-date" required></label>
      <label>Wavelength (Å):
        <select id="solar-wavelength" required style="margin:0.5em;">
          <option value="94">94 Å — Green — ~6.3 MK (hot flaring plasma)</option>
          <option value="131">131 Å — Teal — ~10 MK (flares) / ~0.4 MK (transition region)</option>
          <option value="171">171 Å — Golden — ~0.8 MK (quiet corona, loops)</option>
          <option value="193">193 Å — Amber — ~1.5 MK (corona) / 20 MK (flares)</option>
          <option value="211">211 Å — Purple — ~2.0 MK (active regions)</option>
          <option value="304">304 Å — Red — ~0.05 MK (chromosphere, prominences)</option>
          <option value="335">335 Å — Blue — ~2.5 MK (active regions)</option>
        </select>
      </label>
      <br>

      <br>
      <div style="display:flex; flex-direction:column; gap:0.5rem;">

        <button id="generate-btn" style="width:200px;">Generate Preview</button>

        <button id="hq-btn" style="width:200px;">Generate HQ Proof</button>

      </div>
    </div>

      <h5>AIA Imagery is available from 05/15/2025, EIT Data is available from 01/01/1996</h5>
      <p>Preview the solar activity on any day at <a href = 'https://www.helioviewer.org' target="_blank">helioviewer.org</a></p>

    <div id="progress-container" style="width:100%; background:#eee; height:12px; border-radius:6px; margin-top:1em;">
      <div id="progress-bar" style="width:0%; height:100%; background:#4a90e2; border-radius:6px;"></div>
    </div>
    <div id="solar-status">Waiting for selection...</div>

    <div class="grid">
      <div>
        <img id="solar-image" alt="Solar preview" />
      </div>
      <div>
        <!-- <button id="uploadPrintfulBtn" style="margin-bottom:1rem; width:200px;">Upload to Printful</button>
        <button id="openPrintfulDashboardBtn" style="margin-bottom:1rem; width:200px;">Open Printful Dashboard</button>
        <h3>Products</h3>
        <!-- <div id="productPicker"></div> -->

        <!-- <br> -->
        <!-- <button id="clearCacheBtn" style="width:200px;">Clear Cache</button> --> -->

        <!-- <h3 style="margin-top:1.5rem;">Manual Order (demo)</h3>
        <form id="orderForm">
          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:.5rem;">
            <input name="variant_id" type="number" placeholder="Variant ID" required />
            <input name="name" placeholder="Full name" required />
            <input name="address1" placeholder="Address" required />
            <input name="city" placeholder="City" required />
            <input name="state_code" placeholder="State code" required />
            <input name="country_code" placeholder="Country code" required />
            <input name="zip" placeholder="ZIP" required />
            <input name="email" type="email" placeholder="Email" required />
          </div>
          <button type="submit" style="margin-top:.75rem;">Place Order</button>
        </form> -->

      </div>
    </div>
  </div>

  <!-- Load helpers and app logic -->
  <script src="/api/static/printful.js"></script>
  <script src="/api/static/frontend.js"></script>
</body>
</html>